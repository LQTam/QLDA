{"ast":null,"code":"var _jsxFileName = \"/home/dev/ictu/qlda/QLDA/src/components/ThuePhong/Data-Thembangai/Data-traveketquathembangai/Viewdata.js\";\nimport React, { Component } from 'react';\nimport * as tf from '@tensorflow/tfjs';\nimport dl from '../Data-traveketquathembangai/DulieuHuanLuyen.json';\n\nclass Viewdata extends Component {\n  constructor(props) {\n    super(props);\n\n    this.showconten = () => {\n      if (this.props.dulieuchungminhnhdandan.nationality === \"N/A\") {\n        return React.createElement(\"h4\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 17\n          },\n          __self: this\n        }, \"H\\xECnh \\u1EA3nh \\u0111\\u1EA7u v\\xE0o : ch\\u1EE9ng minh nh\\xE2n d\\xE2n (Lo\\u1EA1i c\\u0169) \");\n      } else if (this.props.dulieuchungminhnhdandan.nationality === undefined) {\n        return React.createElement(\"h4\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 23\n          },\n          __self: this\n        }, \"H\\xECnh \\u1EA3nh \\u0111\\u1EA7u v\\xE0o : ch\\u1EE9ng minh nh\\xE2n d\\xE2n (Lo\\u1EA1i m\\u1EDBi) \");\n      } else {\n        return React.createElement(\"h4\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 28\n          },\n          __self: this\n        }, \"H\\xECnh \\u1EA3nh \\u0111\\u1EA7u v\\xE0o :  C\\u0103n c\\u01B0\\u1EDBc c\\xF4ng d\\xE2n\");\n      }\n    };\n\n    this.tensorflowtinhtoan = () => {\n      let names = [];\n      let sexs = [];\n      let sexname = [\"NAM\", \"NỮ\"];\n      dl.map(item => {\n        names.push((item.namecat.charCodeAt(0) + item.namecat.charCodeAt(1) + item.namecat.charCodeAt(2) - 169) / 77);\n        sexs.push(sexname.indexOf(item.sexcat));\n        return 0;\n      });\n      console.log(names); // dua data ve tensor\n\n      let xs = tf.tensor1d(names);\n      let convetys = tf.tensor1d(sexs, 'int32');\n      let ys = tf.oneHot(convetys, 2);\n      console.log(sexs);\n      console.log(ys); // dua ve model va cac mo hinh\n\n      let model = tf.sequential();\n      let HiddenLayOut = tf.layers.dense({\n        units: 16,\n        activation: 'sigmoid',\n        inputDim: 1\n      });\n      let OutPutLayOut = tf.layers.dense({\n        activation: 'softmax',\n        units: 2\n      });\n      model.add(HiddenLayOut);\n      model.add(OutPutLayOut);\n      model.compile({\n        optimizer: tf.train.sgd(0, 2),\n        loss: 'categoricalCrossentropy'\n      });\n      console.log(\"Đang tự học\"); // train data\n\n      async function train() {\n        let option = {\n          epochs: 200,\n          validationSplit: 0.1,\n          shuffle: true\n        };\n        return await model.fit(xs, ys, option);\n      }\n\n      train().then(res => {\n        console.log(\"học hỏi thành công\");\n        console.log(res.history.loss);\n        let data = this.props.dulieuchungminhnhdandan.name;\n        let cut = data.slice(-3);\n\n        function to_slug(str) {\n          // Chuyển hết sang chữ thường\n          str = str.toLowerCase(); // xóa dấu\n\n          str = str.replace(/(à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ)/g, 'a');\n          str = str.replace(/(è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ)/g, 'e');\n          str = str.replace(/(ì|í|ị|ỉ|ĩ)/g, 'i');\n          str = str.replace(/(ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ)/g, 'o');\n          str = str.replace(/(ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ)/g, 'u');\n          str = str.replace(/(ỳ|ý|ỵ|ỷ|ỹ)/g, 'y');\n          str = str.replace(/(đ)/g, 'd'); // Xóa ký tự đặc biệt\n\n          str = str.replace(/([^0-9a-z-\\s])/g, ''); // Xóa khoảng trắng thay bằng ký tự -\n\n          str = str.replace(/(\\s+)/g, ''); // xóa phần dự - ở đầu\n\n          str = str.replace(/^-+/g, ''); // xóa phần dư - ở cuối\n\n          str = str.replace(/-+$/g, ''); // return\n\n          return str;\n        }\n\n        let all = to_slug(cut);\n        let ket = all.toUpperCase(); // ket qua train\n\n        let dataconvetint32 = (ket.charCodeAt(0) + ket.charCodeAt(1) + ket.charCodeAt(2) - 169) / 77;\n        let tensordata = tf.tensor1d([dataconvetint32]);\n        let aws = model.predict(tensordata);\n        let max = aws.argMax(1).dataSync()[0];\n        let ketqua = sexname[max];\n        this.setState({\n          ketquachinhthuc: ketqua\n        }); // this.props.setTrueGender(this.state.ketquachinhthuc);\n\n        console.log(this.state.ketquachinhthuc);\n      });\n    };\n\n    this.phongdoangioitinh = () => {\n      if (this.props.dulieuchungminhnhdandan.sex === \"N/A\") {\n        return React.createElement(\"button\", {\n          type: \"button\",\n          className: \"btn btn-success\",\n          onClick: () => this.tensorflowtinhtoan(),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145\n          },\n          __self: this\n        }, \"T\\u1EF0 H\\u1ECCC\");\n      } else {\n        return this.props.dulieuchungminhnhdandan.sex;\n      }\n    };\n\n    this.state = {\n      data: this.props.dulieuchungminhnhdandan,\n      ketquachinhthuc: ''\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      id: \"ket-qua-trich-xuat\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, this.showconten(), React.createElement(\"div\", {\n      id: \"anh-cmnd\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, this.props.dulieuchungminhnhdandan.cropped_idcard && React.createElement(\"img\", {\n      src: this.props.dulieuchungminhnhdandan.cropped_idcard,\n      alt: \"demo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }), this.props.dulieuchungminhnhdandan && React.createElement(\"img\", {\n      className: \"card-img-top\",\n      width: \"120px\",\n      src: this.props.dulieuchungminhnhdandan,\n      alt: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      id: \"thong-tin-khach\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"avatar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, this.props.dulieuchungminhnhdandan.face && React.createElement(\"img\", {\n      width: \"220px\",\n      src: this.props.dulieuchungminhnhdandan.face,\n      alt: \"demo2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      id: \"thong-tin-lay-duoc\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, this.props.dulieuchungminhnhdandan.name && React.createElement(\"h5\", {\n      className: \"card-title color_mana mb-10\",\n      style: {\n        marginBottom: '5px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, \"T\\xEAn : \", this.props.dulieuchungminhnhdandan.name), this.props.dulieuchungminhnhdandan.home && React.createElement(\"h5\", {\n      className: \"card-title color_mana mb-10\",\n      style: {\n        marginBottom: '5px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, \"\\u0110\\u1ECBa ch\\u1EC9 \\u0111\\u0103ng k\\xFD : \", this.props.dulieuchungminhnhdandan.home), this.props.dulieuchungminhnhdandan.id && React.createElement(\"h5\", {\n      className: \"card-title color_mana mb-10\",\n      style: {\n        marginBottom: '5px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, \"S\\u1ED1 cmnd : \", this.props.dulieuchungminhnhdandan.id), this.props.dulieuchungminhnhdandan.dob && React.createElement(\"h5\", {\n      className: \"card-title color_mana mb-10\",\n      style: {\n        marginBottom: '5px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, \"Ng\\xE0y sinh : \", this.props.dulieuchungminhnhdandan.dob), this.props.dulieuchungminhnhdandan.sex && React.createElement(\"h5\", {\n      className: \"card-title color_mana  mb-10\",\n      style: {\n        marginBottom: '5px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, \"Gi\\u1EDBi t\\xEDnh : \", this.phongdoangioitinh(), \"     \", this.state.ketquachinhthuc))));\n  }\n\n}\n\nexport default Viewdata;","map":{"version":3,"sources":["/home/dev/ictu/qlda/QLDA/src/components/ThuePhong/Data-Thembangai/Data-traveketquathembangai/Viewdata.js"],"names":["React","Component","tf","dl","Viewdata","constructor","props","showconten","dulieuchungminhnhdandan","nationality","undefined","tensorflowtinhtoan","names","sexs","sexname","map","item","push","namecat","charCodeAt","indexOf","sexcat","console","log","xs","tensor1d","convetys","ys","oneHot","model","sequential","HiddenLayOut","layers","dense","units","activation","inputDim","OutPutLayOut","add","compile","optimizer","train","sgd","loss","option","epochs","validationSplit","shuffle","fit","then","res","history","data","name","cut","slice","to_slug","str","toLowerCase","replace","all","ket","toUpperCase","dataconvetint32","tensordata","aws","predict","max","argMax","dataSync","ketqua","setState","ketquachinhthuc","state","phongdoangioitinh","sex","render","cropped_idcard","face","marginBottom","home","id","dob"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport * as tf from '@tensorflow/tfjs';\nimport dl from '../Data-traveketquathembangai/DulieuHuanLuyen.json';\nclass Viewdata extends Component {\n\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            data: this.props.dulieuchungminhnhdandan,\n            ketquachinhthuc: ''\n        };\n    }\n    showconten = () => {\n        if (this.props.dulieuchungminhnhdandan.nationality === \"N/A\") {\n            return (\n                <h4>Hình ảnh đầu vào : chứng minh nhân dân (Loại cũ) </h4>\n\n            )\n        }\n        else if (this.props.dulieuchungminhnhdandan.nationality === undefined) {\n            return (\n                <h4>Hình ảnh đầu vào : chứng minh nhân dân (Loại mới) </h4>\n            )\n        }\n        else {\n            return (\n                <h4>Hình ảnh đầu vào :  Căn cước công dân</h4>\n            )\n        }\n    }\n\n    tensorflowtinhtoan = () => {\n        let names = [];\n        let sexs = [];\n        let sexname = [\"NAM\", \"NỮ\"];\n\n        dl.map((item) => {\n            names.push((((item.namecat).charCodeAt(0) + (item.namecat).charCodeAt(1) + (item.namecat).charCodeAt(2)) - 169) / 77);\n            sexs.push(sexname.indexOf(item.sexcat));\n            return 0;\n        })\n        console.log(names);\n\n\n        // dua data ve tensor\n        let xs = tf.tensor1d(names);\n        let convetys = tf.tensor1d(sexs, 'int32');\n        let ys = tf.oneHot(convetys, 2);\n        console.log(sexs);\n        console.log(ys);\n\n        // dua ve model va cac mo hinh\n\n        let model = tf.sequential();\n        let HiddenLayOut = tf.layers.dense({\n            units: 16,\n            activation: 'sigmoid',\n            inputDim: 1,\n        })\n        let OutPutLayOut = tf.layers.dense({\n            activation: 'softmax',\n            units: 2\n        })\n\n        model.add(HiddenLayOut);\n        model.add(OutPutLayOut);\n        model.compile({\n            optimizer: tf.train.sgd(0, 2),\n            loss: 'categoricalCrossentropy'\n        })\n\n        console.log(\"Đang tự học\");\n\n\n        // train data\n        async function train() {\n            let option =\n            {\n                epochs: 200,\n                validationSplit: 0.1,\n                shuffle: true\n            }\n            return await model.fit(xs, ys, option);\n\n        }\n\n        train().then((res) => {\n            console.log(\"học hỏi thành công\");\n            console.log(res.history.loss);\n\n            let data = this.props.dulieuchungminhnhdandan.name;\n            let cut = data.slice(-3);\n            function to_slug(str) {\n                // Chuyển hết sang chữ thường\n                str = str.toLowerCase();\n\n                // xóa dấu\n                str = str.replace(/(à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ)/g, 'a');\n                str = str.replace(/(è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ)/g, 'e');\n                str = str.replace(/(ì|í|ị|ỉ|ĩ)/g, 'i');\n                str = str.replace(/(ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ)/g, 'o');\n                str = str.replace(/(ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ)/g, 'u');\n                str = str.replace(/(ỳ|ý|ỵ|ỷ|ỹ)/g, 'y');\n                str = str.replace(/(đ)/g, 'd');\n\n                // Xóa ký tự đặc biệt\n                str = str.replace(/([^0-9a-z-\\s])/g, '');\n\n                // Xóa khoảng trắng thay bằng ký tự -\n                str = str.replace(/(\\s+)/g, '');\n\n                // xóa phần dự - ở đầu\n                str = str.replace(/^-+/g, '');\n\n                // xóa phần dư - ở cuối\n                str = str.replace(/-+$/g, '');\n\n                // return\n                return str;\n            }\n            let all = to_slug(cut);\n            let ket = all.toUpperCase();\n\n            // ket qua train\n            let dataconvetint32 = (((ket.charCodeAt(0) + ket.charCodeAt(1) + ket.charCodeAt(2)) - 169) / 77);\n            let tensordata = tf.tensor1d([dataconvetint32]);\n            let aws = model.predict(tensordata);\n            let max = aws.argMax(1).dataSync()[0];\n            let ketqua = sexname[max];\n            this.setState({\n                ketquachinhthuc: ketqua\n            });\n\n            // this.props.setTrueGender(this.state.ketquachinhthuc);\n            console.log(this.state.ketquachinhthuc);\n        })\n    }\n\n\n\n    phongdoangioitinh = () => {\n        if (this.props.dulieuchungminhnhdandan.sex === \"N/A\") {\n            return (\n                <button type=\"button\" className=\"btn btn-success\" onClick={() => this.tensorflowtinhtoan()}>TỰ HỌC</button>\n            );\n        }\n        else{\n            return (this.props.dulieuchungminhnhdandan.sex);\n        }\n    }\n\n    render() {\n\n        return (\n\n            <div id=\"ket-qua-trich-xuat\">\n                {this.showconten()}\n                <div id=\"anh-cmnd\">\n                    {this.props.dulieuchungminhnhdandan.cropped_idcard && <img src={this.props.dulieuchungminhnhdandan.cropped_idcard} alt=\"demo\" />}\n                    {this.props.dulieuchungminhnhdandan && <img className=\"card-img-top\" width=\"120px\" src={this.props.dulieuchungminhnhdandan} alt=\"\" />}\n                </div>\n                <div id=\"thong-tin-khach\">\n                    <div id=\"avatar\">\n                        {this.props.dulieuchungminhnhdandan.face && <img width=\"220px\" src={this.props.dulieuchungminhnhdandan.face} alt=\"demo2\" />}\n                    </div>\n                    <div id=\"thong-tin-lay-duoc\">\n                        {this.props.dulieuchungminhnhdandan.name && <h5 className=\"card-title color_mana mb-10\" style={{ marginBottom: '5px' }}>Tên : {this.props.dulieuchungminhnhdandan.name}</h5>}\n                        {this.props.dulieuchungminhnhdandan.home && <h5 className=\"card-title color_mana mb-10\" style={{ marginBottom: '5px' }}>Địa chỉ đăng ký : {this.props.dulieuchungminhnhdandan.home}</h5>}\n                        {this.props.dulieuchungminhnhdandan.id && <h5 className=\"card-title color_mana mb-10\" style={{ marginBottom: '5px' }}>Số cmnd : {this.props.dulieuchungminhnhdandan.id}</h5>}\n                        {this.props.dulieuchungminhnhdandan.dob && <h5 className=\"card-title color_mana mb-10\" style={{ marginBottom: '5px' }}>Ngày sinh : {this.props.dulieuchungminhnhdandan.dob}</h5>}\n                        {this.props.dulieuchungminhnhdandan.sex && <h5 className=\"card-title color_mana  mb-10\" style={{ marginBottom: '5px' }}>Giới tính : {this.phongdoangioitinh()}     {this.state.ketquachinhthuc}</h5>}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Viewdata;"]},"metadata":{},"sourceType":"module"}