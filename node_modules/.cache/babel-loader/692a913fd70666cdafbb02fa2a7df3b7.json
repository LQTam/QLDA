{"ast":null,"code":"var _jsxFileName = \"/home/dev/ictu/qlda/QLDA/src/components/ThuePhong/Data-Thembangai/ThemmoibangAI.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport request from 'superagent';\nimport Viewdata from './Data-traveketquathembangai/Viewdata';\nimport mahoan from './Data-traveketquathembangai/mahoan.json';\nimport { withFirebase } from '../../Firebase';\n\nclass ThemmoibangAI extends Component {\n  constructor(props) {\n    super(props);\n\n    this.isChange = event => {\n      const value = event.target.value;\n      this.setState({\n        image_url: event.target.value,\n        data: event.target.value\n      });\n      console.log(value);\n    };\n\n    this.IsChange2 = event => {\n      const name = event.target.name;\n      const value = event.target.value;\n      this.setState({\n        [name]: value\n      });\n      console.log(event.target.value);\n    };\n\n    this.Haller = () => {\n      if (this.state.image_url === \"\") {\n        alert('Yêu cầu bạn nhập thông tin');\n      } else {\n        var info = {};\n        info.image_url = this.state.image_url;\n        request.post('https://api.openfpt.vn/cmt').set('Content-Type', 'application/x-www-form-urlencoded').set('api_key', this.state.datas).send({\n          image_url: this.state.image_url\n        }).send({\n          face: 1\n        }).end(function (err, res) {\n          if (err) {\n            alert(\"ban hết hạn số lượt gọi\");\n          } else {\n            var items = JSON.parse(res.text);\n\n            if (res.body.errorCode === 3) {\n              alert('hệ thống không tìm thấy CMT trong ảnh hoặc ảnh có chất lượng kém (quá mờ, quá tối/sáng).');\n            } else if (res.body.errorCode === 1) {\n              alert('Sai thông số trong request (ví dụ không có key hoặc ảnh trong request body).');\n            } else if (res.body.errorCode === 2) {\n              alert('CMT trong ảnh bị thiếu góc nên không thể crop về dạng chuẩn.');\n            } else if (res.body.errorCode === 5) {\n              alert(' Request sử dụng key image_url nhưng giá trị bỏ trống.');\n            } else if (res.body.errorCode === 6) {\n              alert('Request sử dụng key image_url nhưng hệ thống không thể mở được URL này.');\n            } else if (res.body.errorCode === 7) {\n              alert('File gửi lên không phải là file ảnh.');\n            } else if (res.body.errorCode === 8) {\n              alert(' File ảnh gửi lên bị hỏng hoặc format không được hỗ trợ.');\n            } else if (res.body.errorCode === 9) {\n              alert(' Request sử dụng key image_base64 nhưng giá trị bỏ trống.');\n            } else if (res.body.errorCode === 10) {\n              alert('Request sử dụng key image_base64 nhưng string cung cấp không hợp lệ.');\n            } else {\n              localStorage.setItem('mahoan', JSON.stringify(items.data[0]));\n              console.log(items.data[0]);\n              window.location.reload();\n            }\n          }\n        });\n      }\n    };\n\n    this.ButtonsClean2 = () => {\n      if (window.confirm('Bạn muốn thực hiện quy trình làm sạch dữ liệu nền [YES]')) {\n        setTimeout(function () {\n          window.location.reload();\n          localStorage.removeItem('mahoan');\n        }, 3000);\n      }\n    };\n\n    this.ButtonsClean = () => {\n      if (window.confirm('Bạn muốn thực hiện quy trình tải dữ liệu lên [YES]')) {\n        let d = new Date();\n        let nam = d.getFullYear();\n        let thang = d.getMonth() + 1;\n        let ngay = d.getDate();\n        var data = {};\n        data.maphong = this.state.NameRoom.slice(5);\n        data.sdt = this.state.Sđt;\n        data.tenkhach = this.state.data.name;\n        data.diachi = this.state.data.home;\n        data.cmnd = this.state.data.id;\n        data.ngaysinh = this.state.data.dob;\n        data.gioitinh = this.state.data.sex;\n        data.ngaydat = nam + \"-\" + thang + \"-\" + ngay;\n        data.trangthai = 2;\n        this.props.firebase.customer(data.maphong).update({\n          cmnd: data.cmnd,\n          diachi: data.diachi,\n          gioitinh: data.gioitinh,\n          ngaydatphong: data.ngaydat,\n          ngaysinh: data.ngaysinh,\n          sdt: data.sdt,\n          tenkhach: data.tenkhach,\n          trangthai: data.trangthai\n        });\n        console.log(data); // this.props.Thongtinduocguile(data);\n\n        this.props.trangthaithaydoi();\n        this.props.Dulieukemtheo('thêm mới   ' + this.state.data.name + '    thành công');\n      }\n    };\n\n    this.showcascphongconhoatdong = () => {\n      if (this.state.datass) {\n        return this.state.datass.map((value, key) => {\n          if (value.trangthai === 1) {\n            return React.createElement(\"option\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 203\n              },\n              __self: this\n            }, value.maphong, \"*\", value.keys);\n          }\n        });\n      }\n    };\n\n    this.state = {\n      image_url: '',\n      data: '',\n      datass: [],\n      Sđt: '',\n      NameRoom: '',\n      datas: [process.env.REACT_APP_API_KEY]\n    };\n  }\n\n  // WARNING! To be deprecated in React v17. Use componentDidMount instead.\n  componentWillMount() {\n    this.props.firebase.customers().on('value', datas => {\n      var Mang = [];\n      datas.forEach(element => {\n        const keys = element.key;\n        const image = element.val().image;\n        const loaiphong = element.val().loaiphong;\n        const maphong = element.val().maphong;\n        const ngaydatphong = element.val().ngaydatphong;\n        const ngaytraphong = element.val().ngaytraphong;\n        const trangthai = element.val().trangthai;\n        const gia = element.val().gia;\n        const tenkhach = element.val().tenkhach;\n        Mang.push({\n          keys: keys,\n          image: image,\n          loaiphong: loaiphong,\n          maphong: maphong,\n          ngaydatphong: ngaydatphong,\n          ngaytraphong: ngaytraphong,\n          trangthai: trangthai,\n          gia: gia,\n          tenkhach: tenkhach\n        });\n      });\n      this.setState({\n        datass: Mang\n      });\n    });\n\n    if (localStorage.getItem('mahoan') === null) {\n      localStorage.setItem('mahoan', JSON.stringify(mahoan));\n    } else {\n      var template = JSON.parse(localStorage.getItem('mahoan'));\n      this.setState({\n        data: template\n      });\n    }\n  }\n\n  componentDidMount() {\n    if (localStorage.getItem('mahoan') === null) {\n      localStorage.setItem('mahoan', JSON.stringify(mahoan));\n    } else {\n      var template = JSON.parse(localStorage.getItem('mahoan'));\n      this.setState({\n        data: template\n      });\n    }\n  }\n\n  // setTrueGender = gender=>{\n  //     this.setState({data : {\n  //         sex : gender,\n  //     }})\n  // }\n  render() {\n    return React.createElement(\"div\", {\n      className: \"container-AI\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"modal fade\",\n      id: \"myModalThemMoiBangAI\",\n      role: \"dialog\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"modal-dialog\",\n      role: \"document\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"modal-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"modal-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      className: \"modal-title\",\n      style: {\n        marginTop: '5px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, \"Th\\xEAm t\\u1EF1 \\u0111\\u1ED9ng b\\u1EB1ng AI\")), React.createElement(\"div\", {\n      className: \"modal-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      action: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"fname\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, \"\\u0110\\u1ECBa ch\\u1EC9 \\u1EA3nh:\"), React.createElement(\"input\", {\n      type: \"text\",\n      id: \"name\",\n      name: \"image_url\",\n      onChange: event => this.isChange(event),\n      placeholder: \"Nh\\u1EADp \\u0111\\u1ECBa ch\\u1EC9 \\u1EA3nh CMND/Th\\u1EBB c\\u0103n c\\u01B0\\u1EDBc...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-dark\",\n      onClick: () => this.Haller(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, \"Getdata\"), React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-dark\",\n      onClick: () => this.ButtonsClean2(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, \"Clear\"), React.createElement(\"h3\", {\n      style: {\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, \"K\\u1EBFt qu\\u1EA3:\"), React.createElement(Viewdata, {\n      dulieuchungminhnhdandan: this.state.data //  setTrueGender = {this.setTrueGender}\n      ,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"form-group mt-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"usr\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, \"S\\u0111t:\"), React.createElement(\"input\", {\n      type: \"text\",\n      name: \"S\\u0111t\",\n      onChange: event => this.IsChange2(event),\n      className: \"form-control\",\n      id: \"usr\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"exampleFormControlSelect2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }, \"S\\u1ED1 ph\\xF2ng c\\xF2n tr\\u1ED1ng\"), React.createElement(\"select\", {\n      multiple: true,\n      className: \"form-control\",\n      onChange: event => this.IsChange2(event),\n      name: \"NameRoom\",\n      id: \"exampleFormControlSelect2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }, this.showcascphongconhoatdong()))), React.createElement(\"div\", {\n      style: {\n        marginTop: '20px',\n        textAlign: 'right'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-outline-info fa fa-plus-square\",\n      id: \"saveCustInfo\",\n      onClick: () => this.ButtonsClean(),\n      \"data-dismiss\": \"modal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"btn btn-outline-info fa fa-times-circle\",\n      \"data-dismiss\": \"modal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    })))))));\n  }\n\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    Dataorigin: state.Trangthaipushkhongai,\n    Thaydoitrangthai: state.Thongbao.trangthai\n  };\n};\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  return {\n    Thongtinduocguile: getitem => {\n      dispatch({\n        type: 'PUSHDATA',\n        getitem\n      });\n    },\n    Dulieukemtheo: gettion => {\n      dispatch({\n        type: 'GET_DATA',\n        gettion\n      });\n    },\n    trangthaithaydoi: () => {\n      dispatch({\n        type: 'CHANGER_INFO'\n      });\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withFirebase(ThemmoibangAI));","map":{"version":3,"sources":["/home/dev/ictu/qlda/QLDA/src/components/ThuePhong/Data-Thembangai/ThemmoibangAI.js"],"names":["React","Component","connect","request","Viewdata","mahoan","withFirebase","ThemmoibangAI","constructor","props","isChange","event","value","target","setState","image_url","data","console","log","IsChange2","name","Haller","state","alert","info","post","set","datas","send","face","end","err","res","items","JSON","parse","text","body","errorCode","localStorage","setItem","stringify","window","location","reload","ButtonsClean2","confirm","setTimeout","removeItem","ButtonsClean","d","Date","nam","getFullYear","thang","getMonth","ngay","getDate","maphong","NameRoom","slice","sdt","Sđt","tenkhach","diachi","home","cmnd","id","ngaysinh","dob","gioitinh","sex","ngaydat","trangthai","firebase","customer","update","ngaydatphong","trangthaithaydoi","Dulieukemtheo","showcascphongconhoatdong","datass","map","key","keys","process","env","REACT_APP_API_KEY","componentWillMount","customers","on","Mang","forEach","element","image","val","loaiphong","ngaytraphong","gia","push","getItem","template","componentDidMount","render","marginTop","textAlign","mapStateToProps","ownProps","Dataorigin","Trangthaipushkhongai","Thaydoitrangthai","Thongbao","mapDispatchToProps","dispatch","Thongtinduocguile","getitem","type","gettion"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport request from 'superagent';\nimport Viewdata from './Data-traveketquathembangai/Viewdata';\nimport mahoan from './Data-traveketquathembangai/mahoan.json';\nimport { withFirebase } from '../../Firebase';\nclass ThemmoibangAI extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            image_url: '',\n            data: '',\n            datass: [],\n            Sđt: '',\n            NameRoom: '',\n            datas: [process.env.REACT_APP_API_KEY],\n        };\n    }\n\n    isChange = (event) => {\n        const value = event.target.value;\n        this.setState({\n            image_url: event.target.value,\n            data: event.target.value,\n        })\n        console.log(value);\n\n    }\n\n\n    IsChange2 = (event) => {\n        const name = event.target.name;\n        const value = event.target.value;\n        this.setState({\n            [name]: value\n        });\n        console.log(event.target.value);\n    }\n\n    Haller = () => {\n        if (this.state.image_url === \"\") {\n            alert('Yêu cầu bạn nhập thông tin');\n        }\n        else {\n            var info = {};\n            info.image_url = this.state.image_url;\n            request\n                .post('https://api.openfpt.vn/cmt')\n                .set('Content-Type', 'application/x-www-form-urlencoded')\n                .set('api_key', this.state.datas)\n                .send({ image_url: this.state.image_url })\n                .send({ face: 1 })\n                .end(function (err, res) {\n                    if (err) {\n                        alert(\"ban hết hạn số lượt gọi\");\n                    }\n                    else {\n                        var items = JSON.parse(res.text);\n                        if (res.body.errorCode === 3) {\n                            alert('hệ thống không tìm thấy CMT trong ảnh hoặc ảnh có chất lượng kém (quá mờ, quá tối/sáng).');\n                        }\n                        else if (res.body.errorCode === 1) {\n                            alert('Sai thông số trong request (ví dụ không có key hoặc ảnh trong request body).');\n                        }\n                        else if (res.body.errorCode === 2) {\n                            alert('CMT trong ảnh bị thiếu góc nên không thể crop về dạng chuẩn.');\n                        }\n                        else if (res.body.errorCode === 5) {\n                            alert(' Request sử dụng key image_url nhưng giá trị bỏ trống.');\n                        }\n                        else if (res.body.errorCode === 6) {\n                            alert('Request sử dụng key image_url nhưng hệ thống không thể mở được URL này.');\n                        }\n                        else if (res.body.errorCode === 7) {\n                            alert('File gửi lên không phải là file ảnh.');\n                        }\n                        else if (res.body.errorCode === 8) {\n                            alert(' File ảnh gửi lên bị hỏng hoặc format không được hỗ trợ.');\n                        }\n                        else if (res.body.errorCode === 9) {\n                            alert(' Request sử dụng key image_base64 nhưng giá trị bỏ trống.');\n                        }\n                        else if (res.body.errorCode === 10) {\n                            alert('Request sử dụng key image_base64 nhưng string cung cấp không hợp lệ.');\n                        }\n                        else {\n                            localStorage.setItem('mahoan', JSON.stringify(items.data[0]));\n                            console.log(items.data[0]);\n                            window.location.reload();\n                        }\n                    }\n                });\n        }\n\n    }\n\n    // WARNING! To be deprecated in React v17. Use componentDidMount instead.\n    componentWillMount() {\n\n        this.props.firebase.customers()\n            .on('value', (datas) => {\n                var Mang = [];\n                datas.forEach(element => {\n                    const keys = element.key;\n                    const image = element.val().image;\n                    const loaiphong = element.val().loaiphong;\n                    const maphong = element.val().maphong;\n                    const ngaydatphong = element.val().ngaydatphong;\n                    const ngaytraphong = element.val().ngaytraphong;\n                    const trangthai = element.val().trangthai;\n                    const gia = element.val().gia;\n                    const tenkhach = element.val().tenkhach;\n                    Mang.push({\n                        keys: keys,\n                        image: image,\n                        loaiphong: loaiphong,\n                        maphong: maphong,\n                        ngaydatphong: ngaydatphong,\n                        ngaytraphong: ngaytraphong,\n                        trangthai: trangthai,\n                        gia: gia,\n                        tenkhach: tenkhach\n                    })\n                });\n                this.setState({\n                    datass: Mang\n                });\n            })\n\n\n\n        if (localStorage.getItem('mahoan') === null) {\n            localStorage.setItem('mahoan', JSON.stringify(mahoan));\n        }\n        else {\n            var template = JSON.parse(localStorage.getItem('mahoan'));\n            this.setState({\n                data: template\n            })\n        }\n\n    }\n    componentDidMount() {\n        if (localStorage.getItem('mahoan') === null) {\n            localStorage.setItem('mahoan', JSON.stringify(mahoan));\n        }\n        else {\n            var template = JSON.parse(localStorage.getItem('mahoan'));\n            this.setState({\n                data: template\n            })\n\n        }\n    }\n\n    ButtonsClean2 = () => {\n        if (window.confirm('Bạn muốn thực hiện quy trình làm sạch dữ liệu nền [YES]')) {\n            setTimeout(function () {\n                window.location.reload();\n                localStorage.removeItem('mahoan');\n            }, 3000);\n        }\n    }\n\n    ButtonsClean = () => {\n        if (window.confirm('Bạn muốn thực hiện quy trình tải dữ liệu lên [YES]')) {\n            let d = new Date();\n            let nam = d.getFullYear();\n            let thang = d.getMonth() + 1;\n            let ngay = d.getDate();\n            var data = {};\n            data.maphong = this.state.NameRoom.slice(5);\n            data.sdt = this.state.Sđt;\n            data.tenkhach = this.state.data.name;\n            data.diachi = this.state.data.home;\n            data.cmnd = this.state.data.id;\n            data.ngaysinh = this.state.data.dob;\n            data.gioitinh = this.state.data.sex;\n            data.ngaydat = nam + \"-\" + thang + \"-\" + ngay;\n            data.trangthai = 2;\n\n            this.props.firebase.customer(data.maphong).update({\n                cmnd: data.cmnd,\n                diachi: data.diachi,\n                gioitinh: data.gioitinh,\n                ngaydatphong: data.ngaydat,\n                ngaysinh: data.ngaysinh,\n                sdt: data.sdt,\n                tenkhach: data.tenkhach,\n                trangthai: data.trangthai,\n            })\n            console.log(data);\n            // this.props.Thongtinduocguile(data);\n            this.props.trangthaithaydoi();\n            this.props.Dulieukemtheo('thêm mới   ' + this.state.data.name + '    thành công');\n        }\n    }\n\n    showcascphongconhoatdong = () => {\n        if (this.state.datass) {\n            return this.state.datass.map((value, key) => {\n                if (value.trangthai === 1) {\n                    return <option>{value.maphong}*{value.keys}</option>\n                }\n            })\n        }\n    }\n\n    // setTrueGender = gender=>{\n    //     this.setState({data : {\n    //         sex : gender,\n    //     }})\n    // }\n\n    render() {\n        return (\n            <div className=\"container-AI\">\n                {/* Modal */}\n                <div className=\"modal fade\" id=\"myModalThemMoiBangAI\" role=\"dialog\">\n                    <div className=\"modal-dialog\" role='document'>\n                        {/* Modal content*/}\n                        <div className=\"modal-content\">\n                            <div className=\"modal-header\">\n                                <h3 className=\"modal-title\" style={{ marginTop: '5px' }}>Thêm tự động bằng AI</h3>\n                            </div>\n                            <div className=\"modal-body\">\n                                <form action=\"#\">\n                                    <label htmlFor=\"fname\">Địa chỉ ảnh:</label>\n                                    <input type=\"text\" id=\"name\" name=\"image_url\" onChange={(event) => this.isChange(event)} placeholder=\"Nhập địa chỉ ảnh CMND/Thẻ căn cước...\" />\n                                    <button type=\"button\" className=\"btn btn-dark\" onClick={() => this.Haller()}>Getdata</button>\n                                    <button type=\"button\" className=\"btn btn-dark\" onClick={() => this.ButtonsClean2()}>Clear</button>\n                                    <h3 style={{ textAlign: 'center' }}>Kết quả:</h3>\n\n                                    <Viewdata dulieuchungminhnhdandan={this.state.data}\n                                    //  setTrueGender = {this.setTrueGender}\n                                     />\n                                    \n                                    <div className=\"form-group mt-2\">\n                                        <label htmlFor=\"usr\">Sđt:</label>\n                                        <input type=\"text\" name=\"Sđt\" onChange={(event) => this.IsChange2(event)} className=\"form-control\" id=\"usr\" />\n                                    </div>\n\n                                    <div className=\"form-group\">\n                                        <label htmlFor=\"exampleFormControlSelect2\">Số phòng còn trống</label>\n                                        <select multiple className=\"form-control\" onChange={(event) => this.IsChange2(event)} name=\"NameRoom\" id=\"exampleFormControlSelect2\">\n                                            {this.showcascphongconhoatdong()}\n                                        </select>\n                                    </div>\n                                </form>\n                                <div style={{ marginTop: '20px', textAlign: 'right' }}>\n                                    <button className=\"btn btn-outline-info fa fa-plus-square\" id='saveCustInfo' onClick={() => this.ButtonsClean()} data-dismiss=\"modal\" ></button>\n                                    <button className=\"btn btn-outline-info fa fa-times-circle\" data-dismiss=\"modal\"></button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\nconst mapStateToProps = (state, ownProps) => {\n    return {\n        Dataorigin: state.Trangthaipushkhongai,\n        Thaydoitrangthai: state.Thongbao.trangthai\n    }\n}\nconst mapDispatchToProps = (dispatch, ownProps) => {\n    return {\n        Thongtinduocguile: (getitem) => {\n            dispatch({ type: 'PUSHDATA', getitem })\n        },\n\n        Dulieukemtheo: (gettion) => {\n            dispatch({ type: 'GET_DATA', gettion })\n        },\n        trangthaithaydoi: () => {\n            dispatch({ type: 'CHANGER_INFO' })\n        }\n    }\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(withFirebase(ThemmoibangAI))"]},"metadata":{},"sourceType":"module"}